总结 
=======================



1. **不允许使用智能指针** ，允许通过 `Guard` 类自动释放资源。

   

2. 要求使用内存分配器申请内存，内存释放后要立即将指针置为 `NULL`。

   




<!-- -->

3. **禁止使用** **`std::string`** **类，采用** **`ObString`** **代替** 。另外，操作 C 字符串时，要求使用限长字符串函数。

   

4. **作为参数传递数组/字符串/缓冲区时必须同时传递长度，读写数组/字符串/缓冲区内容时要检查下标是否越界** 。

   




<!-- -->

5. 只能在同一个文件中使用友元，如果必须违反，请事先征得小组负责人的同意，并详细注释原因。将单元测试类声明为友元可以例外，但需谨慎使用。

   

6. **禁止使用 C++ 异常** 。

   




<!-- -->

7. 禁止使用运行时类型识别（RTTI）。

   

8. 使用 `static_cast<>` 等 C++ 类型转换，禁止使用类似`int y = (int) x`的 C 强制类型转换。

   




<!-- -->

9. 尽量采用 `to_cstring` 输出。

   

10. 返回的 `ret` 错误码使用 `int`，函数参数和循环次数尽量使用 `int64_t`。其它情况使用指定长度的有符号数，例如 `int32_t`，`int64_t`。尽量避免使用无符号数。

    




<!-- -->

11. 尽量使用 `sizeof(var_name)` 代替 `sizeof(type)`。

    

12. 整数用 `0`，实数用 `0.0`，指针用 `NULL`，字符串用 `'\0'`。

    




<!-- -->

13. **除了已有的宏之外，不得定义新的宏，以内联函数、枚举和常量代替** 。如果必须违反，请事先征得小组负责人的同意，并详细注释原因。

    

14. **除了 STL 中 \<algorithm\> 头文件定义的算法类函数外，禁止使用** **`STL`** **及** **`boost`** 。 **如果必须违反，请事先征得项目负责人和项目架构师的同意，并详细注释原因。**

    



