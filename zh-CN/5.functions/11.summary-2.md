总结 
=======================



1. **严格遵守函数单入口单出口。如果必须违反，请事先征得项目负责人和项目架构师的同意，并详细注释原因** 

   。
   

2. **除了简单存取函数** **`set_xxx()`** **/** **`get_xxx()`** **` `** **和少量例外(如操作符重载，已有的** **`at(i)`** **函数，类的通用函数** **`reset()`** **/** **`reuse() `** **等)，所有函数（** **`public`** **和** **`private`** **）都应该用** **`ret`** **返回错误码，如果** **`set/get`** **比较复杂或可能出错，仍然要用** **`ret`** **返回错误码。** 

   只能用 `int` 类型的 `ret` 变量表示错误，且 `ret` 只能表示错误(迭代器函数由于历史原因除外)。
   

3. 如果多条顺序语句在做同一件事情，那么，在某些情况下可以采用精简写法。

   

4. 在循环条件中判断 `OB_SUCCESS == ret`，防止错误码被覆盖等问题。

   

5. 条件语句需要遵守 MECE 原则：各个条件之间相互独立，完全穷尽，且单个 if/else 的分支个数尽量不超过5个。

   

6. 尽可能将函数/函数参数声明为 `const`。

   

7. **编码的原则：代码上不相信任何人！每个函数（无论** **`public`** **还是** **`private`** **，内联函数除外）必须检查每个输入参数的合法性，强烈建议内联函数也进行这些检查（除非有严重性能问题）。所有函数（无论** **`public`** **还是** **`private`** **）都必须检查从类成员变量或者通过函数调用获得的值（例如 get 返回值或输出参数）的合法性，即使返回值为成功，也仍然要检查输出参数的合法性。变量（参数）检查，一个函数内只需要检查一次（如果多次调用一个或几个函数获得的值，那么每次都要检查）。** 

   定义函数时，建议的顺序为：输入参数在前，输出参数在后。
   

8. **禁止使用** **`assert`** **和** **`OB_ASSERT`** **。**

   

9. 函数调用时应该尽量避免传入一些无意义的特殊值，而采用常量替代。

   

10. 在遵守惯用法的前提下，更多地使用引用。

    

11. 强制要求单个函数不超过 120 行。如果必须违反，请事先征得小组负责人的同意，并详细注释原因。

    



