循环语句 
=========================



在循环条件中判断 `OB_SUCCESS == ret`，防止错误码被覆盖等问题。

OceanBase 发现了大量错误码被覆盖的问题，这些问题往往都会导致严重后果，例如数据不一致，而且非常难以发现。例如：

```cpp
//错误码被覆盖
for (int i = 0; i < 100; ++i) {
 ret = do_something();
 if (OB_SUCCESS != ret) {
// print error log
 } else {
...
 }
}
```



上面的例子中，`for` 循环中的 `if` 分支判断错误，但是忘记 `break`，这样，代码将会进入下一次循环，前一次执行的错误码将被覆盖。

因此，规范 `for` 循环语句的写法如下：

```cpp
for (int i = 0; OB_SUCCESS == ret && i < xxx; ++i) {
 ...
}
```



另外，规范 `while` 循环语句的写法如下：

```cpp
while (OB_SUCCESS == ret && other_cond) {
 ...
}
```



循环语句中可能会用到 `break` 或者 `continue` 来改变执行路径。OceanBase 认为应该尽量少用，这和函数单入口单出口的道理是一样的，相当于循环语句的后续代码的输入来源为多个入口，增加了代码的复杂度。如果确实有必要使用 `break` 和 `continue`，要求通过注释详细说明原因，写代码或者 `Review` 代码时都需要格外关注。另外，考虑到后续代码的输入来源为多个入口，需要确保能说清楚后续代码的输入到底满足什么条件。
